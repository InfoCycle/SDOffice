<!DOCTYPE html>
<html>
  <head>
    <title>员工信息</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="../../plugin/jUI/themes/base/jquery.ui.all.css" type="text/css"></link>
	<link rel="stylesheet" type="text/css" href="../../css/table.css" />
	<link rel="stylesheet" type="text/css" href="../../css/menu.css" />
	<link rel="stylesheet" type="text/css" href="../../css/inputtext.css" />
	<link rel="stylesheet" href="../../css/validationEngine.jquery.css" type="text/css"></link>
	<link rel="stylesheet" href="../../css/button.css" type="text/css"></link>
	
	 <link rel="stylesheet" href="../../css/treenodeicon.css" type="text/css"></link>
	 <link rel="stylesheet" type="text/css" href="../../css/menu.css" /> 
	 <link rel="stylesheet" href="../../css/IconButton.css" type="text/css"></link>
	 <link rel="stylesheet" type="text/css" href="../../ext/resources/css/ext-all.css" />		
	 <link rel="stylesheet" href="../../ext/resources/css/xtheme-gray.css" type="text/css"></link>
	
	<link rel="stylesheet" href="../../plugin/jBox/Skins2/Gray/jbox.css" type="text/css"></link>
    <style type="text/css">
		body {
			background: #f5f5f5;
			height: 100%;
			width: 98%;
		}
		caption{
			font-weight: bold;
			text-align: center;
		}
		.ui-combobox {
		position: relative;
		display: inline-block;
		}
		.ui-combobox-toggle {
			position: absolute;
			top: 0;
			bottom: 0;
			margin-left: -1px;
			padding: 0;
			/* adjust styles for IE 6/7 */
			*height: 1.7em;
			*top: 0.1em;
		}
		.ui-combobox-input {
			margin: 0;
			padding: 0.3em;
		}
		.tbl{
			text-align:right
		}
		#formtask img { vertical-align:middle; cursor:pointer; }
		.imageInputWrapper{border:solid 1px #000;  }
		#formtask input.inputWithImge {border:none; margin-right:5px;}
	</style>
		<script type="text/javascript" src="../../plugin/js/jquery.js"></script>
	
		<script type="text/javascript" src="../../ext/adapter/ext/ext-base.js"></script>
		<script type="text/javascript" src="../../ext/ext-all.js"></script>
		<script type="text/javascript" src="../../ext/locale/ext-lang-zh_CN.js"></script>
		<script type="text/javascript" src="../../js/utils.js"></script>
		
		<script type="text/javascript" src="../../plugin/jBox/jquery.jBox-2.3.min.js"></script>
  		<script type="text/javascript" src="../../plugin/jBox/jquery.jBox-zh-CN.js"></script>

		<script type="text/javascript" src="../../plugin/jUI/js/jquery-1.8.3.js"></script>   
	   	<script src="../../plugin/jUI/js/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
		<script type="text/javascript" src="../../js/jquery.form.js"></script>
		<script type="text/javascript" src="../../plugin/js/jquery.validationEngine-zh.js"></script>
		<script type="text/javascript" src="../../plugin/js/jquery.validationEngine.js"></script>
		<script type="text/javascript" src="../../js/jQueryUtils.js"></script>
		<script type="text/javascript" src="../../js/publciUtil.js"></script>
		<script type="text/javascript" src="../../plugin/jBox/jquery.jBox-2.3.min.js"></script>
		<script type="text/javascript" src="../../plugin/jBox/jquery.jBox-zh-CN.js"></script>
				
		<script src="../../plugin/jUI/ui/i18n/jquery.ui.datepicker-zh-CN.js"></script>
		
  <script type="text/javascript" language="javascript">
  if (window.navigator.userAgent.indexOf("Firefox") >= 1) {
		//如果浏览器为Firefox
		setActiveStyleSheet("papersother.css");
	} else {
		//如果浏览器为其它
		setActiveStyleSheet("papers.css");
	}
	function setActiveStyleSheet(filename) {
		document.write("<link href=\"..\/..\/css\/"+filename+"\" type=\"text\/css\" rel=\"stylesheet\">");
	}
	
		function addp(){
				for(var rows = $("#Professional tr").size();rows>1;rows--){
					$("#Professional tr").eq(rows).remove();
				}
				$('#Professional').append("<tr id='padd'><td><input type='hidden' id='pFId' name='pFId' /><input type='text' style='width:100px;' id='pFQualificationName' name='pFQualificationName' class='validate[required\,minSize[1]\,maxSize[50]]'/><input type='hidden' id='pFkEmployeeId' name='pFkEmployeeId' /></td>"
				+"<td><input type='text' class='time' style='width:70px;' id='pFGetTime' name='pFGetTime'  readonly/></td>"
				+"<td colspan='2'><input type='text' style='width:180px;' id='pFNumber' name='pFNumber' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
				+"<td><input type='text' class='time' style='width:70px;' id='pFValidity' name='pFValidity' readonly'/></td>"
				+"<td><input type='text' style='width:100px;' id='pFRegisteredUnit' name='pFRegisteredUnit' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
				+"<td><input type='text' style='width:100px;' id='pFRenewalEduSituation' name='pFRenewalEduSituation'></td>"
				+"<td><input  type='button' value='保存' onClick='save(2\,\"padd\"\,\"addpbut\");'/><input type='button' value='取消' onClick='cancel(\"padd\"\,\"addpbut\");'/></td></tr>");
				isE("addpbut",true);
				$("#pFkEmployeeId").val($("#FId").val());
				$(".time" ).datepicker({
				showOn: "button",
				buttonImage: "../../images/calendar.gif",
				buttonImageOnly: true,
				numberOfMonths: 1,
				showButtonPanel: true,
				altFormat:'yy-mm-dd'
			});
		}
		function closs(dd,id){
			$("#"+dd).remove();
			isE(id,false);
		}
		function isE(addn,isAdd){
			if(isAdd){
				$("#"+addn).attr("disabled",true);
			}else{
				$("#"+addn).attr("disabled",false);
			}
		}
		function addf(){
			
			for(var rows = $("#family tr").size();rows>1;rows--){
				$("#family tr").eq(rows).remove();
			}
			$("#family").append("<tr id='fadd'><td colspan='2'><input type='hidden' id='fFId' name='fFId' />"
													+"<input type='hidden' id='fFkEmployeeId' name='fFkEmployeeId' />"
													+"<input type='text' style='width:200px;' id='fFMainMembersName' name='fFMainMembersName' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
													+"<td colspan='2'><input type='text' style='width:200px;' id='fFAndIrelationship' name='fFAndIrelationship' class='validate[required\,minSize[1]\,maxSize[20]]'/></td>"
													+"<td colspan='2'><input type='text' style='width:200px;' id='fFPhone' name='fFPhone' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
													+"<td colspan='2'><input  type='button' value='保存' onClick='save(1\,\"fadd\"\,\"addfbut\");'/><input type='button' value='取消' onClick='cancel(\"fadd\"\,\"addfbut\");'/></td></tr>");
			isE("addfbut",true);
			$("#fFkEmployeeId").val($("#FId").val());
		}
		
		function save(nu,dd,id){
			if (!$("#formtask").validationEngine('validate')) {
									return false;
				}
			var urls={1:'/employee/2/',2:'/employee/3/',3:'/employee/5/',4:'/employee/6/'}
			var url=urls[nu];
			var data1={
				"fFId":$("#fFId").val(),
				"fFkEmployeeId":$("#fFkEmployeeId").val(),
				"fFMainMembersName":$("#fFMainMembersName").val(),
				"fFAndIrelationship":$("#fFAndIrelationship").val(),
				"fFPhone":$("#fFPhone").val()
			}
			var data2={
				"pFId":$("#pFId").val(),
				"pFQualificationName":$("#pFQualificationName").val(),
				"pFkEmployeeId":$("#pFkEmployeeId").val(),
				"pFGetTime":$("#pFGetTime").val(),
				"pFNumber":$("#pFNumber").val(),
				"pFValidity":$("#pFValidity").val(),
				"pFRegisteredUnit":$("#pFRegisteredUnit").val(),
				"pFRenewalEduSituation":$("#pFRenewalEduSituation").val()
			}
			var datas={1:data1,0:data2};
			var da=datas[nu%2];
			$.jBox.tip("正在保存,请稍等..", 'loading');
			$.post(
				url,
				da,
				function(data){
					if(data){
						if(data.success){
							$.jBox.tip(data.message, 'success');
							closs(dd,id);
							if(id=="addfbut"){
								familyPost($("#FId").val(),false);
							}else{
								ProfessionalPost($("#FId").val());
							}
						}else{
							$.jBox.tip(data.message, 'failure');
						}
					}else{
						$.jBox.tip('网络错误!请稍后再试..', 'failure'); 
					}
				});
			}
		function familyPost(id,isp){
			$.post(
					"/employee/9/",
					{"FId":id},
					function(data){
						if(data){
							setFamily(data.root);
						}else{
							$.jBox.info('网络错误!请稍后再试..');
						}
						if(isp){
							ProfessionalPost(id);
						}
				});
		}
		function ProfessionalPost(id){
			$.post(
					"/employee/10/",
					{"FId":id},
					function(data){
						if(data){
							 if(data.root!=null){
								setProfessional(data.root);
							}
						}else{
							$.jBox.info('网络错误!请稍后再试..');
						}
				});
		}
		function eSave(){
			if (!$("#formtask").validationEngine('validate')) {
				return false;
			}
  			if($("#FId").val()==""){
  				$.jBox.tip("正在保存,请稍等..", 'loading');
	  			var da=getEmployee();
	  			$.post(
	  				"/employee/1/",
	  				da,
	  				function(data){
	  					if(data){
	  						if(data.success){
	  							$.jBox.tip(data.message, 'success');
	  							eReload(data.root.FId);
	  						}else{
	  							$.jBox.tip(data.message, 'failure');
	  						}
	  					}else{
	  						$.jBox.tip("网络错误!请稍后再试..", 'failure');
	  					}
	  				}
	  			);
  			}else{
  				$.jBox.tip("正在保存,请稍等..", 'loading');
	  			var da=getEmployee();
	  			$.post(
	  				"/employee/4/",
	  				da,
	  				function(data){
	  					if(data){
	  						if(data.success){
	  							$.jBox.tip(data.message, 'success');
	  						}else{
	  							$.jBox.tip(data.message, 'failure');
	  						}
	  					}else{
	  						$.jBox.tip("网络错误!请稍后再试..", 'failure');
	  					}
	  				}
	  			);
  			}
  		}
  			
			function setEmployee(emp){
				$("#FBelongsDept").val(emp.FBelongsDept);
				$("#FBelongsDeptId").val(emp.FBelongsDeptId);
				$("#FBirthDay").val(emp.FBirthDay);
				$("#FContact").val(emp.FContact);
				$("#FContractRs").val(emp.FContractRs);
				$("#FCultureDegree").val(emp.FCultureDegree);
				$("#FFamilyDetailedAddress").val(emp.FFamilyDetailedAddress);
				$("#FId").val(emp.FId);
				$("#FIdcardNumber").val(emp.FIdcardNumber);
				$("#FIntoCompanyTime").val(emp.FIntoCompanyTime);
				$("#FTheLaborContractTime").val(emp.FTheLaborContractTime);
				$("#FLaborContractExpiresTime").val(emp.FLaborContractExpiresTime);
				$("#FLaborIs").val(emp.FLaborIs);
				$("#FMajor").val(emp.FMajor);
				$("#FMaritalStatus").val(emp.FMaritalStatus);
				$("#FNational").val(emp.FNational);
				$("#FNativePlace").val(emp.FNativePlace);
				$("#FNowRpr").val(emp.FNowRpr);
				$("#FNumbers").val(emp.FNumbers);
				$("#FNumbers").append(emp.FNumbers);
				$("#FPolitical").val(emp.FPolitical);
				$("#FProfessional").val(emp.FProfessional);
				$("#FSex").val(emp.FSex);
				$("#FStaffName").val(emp.FStaffName);
				$("#FStaffState").val(emp.FStaffState);
				$("#FEmployeeType").val(emp.FEmployeeType);
				$("#FToWorkTime").val(emp.FToWorkTime);
				$("#FTechnical").val(emp.FTechnical);
			}
			function setFamily(fam){
				for(var i=0;i<fam.length;i++){
					var fa=fam[i];
					$("#family").append("<tr id='f"+fa.FId+"'><td colspan='2'>"
					+fa.FMainMembersName+"</td><td colspan='2'>"
					+fa.FAndIrelationship+"</td><td colspan='3'>"
					+fa.FPhone+"</td><td><img src='../../images/edit.png' onClick='editf(this);'/>&nbsp;&nbsp;<img src='../../images/delete.png' onClick='deletef(this)'/></td></tr>"
					);
				}
			}
		
			function setProfessional(prof){
				for(var i=0;i<prof.length;i++){
					var pro=prof[i];
					$('#Professional').append("<tr id='p"+pro.FId+"'><td>"
					+pro.FQualificationName+"</td><td>"
					+pro.FGetTime+"</td><td colspan='2'>"
					+pro.FNumber+"</td><td>"
					+pro.FValidity+"</td><td>"
					+pro.FRegisteredUnit+"</td><td>"
					+pro.FRenewalEduSituation+"</td><td><img src='../../images/edit.png' onClick='editp(this);'/>&nbsp;&nbsp;<img src='../../images/delete.png' onClick='deletep(this);'/></td></tr>");
				}
			}
		function eReload(id){
  			window.location.href="/html/module/employee/employeeinfo.html?id="+id;
  		}
  		function last(){
  			window.location.href="/html/module/employee/employeemanage.html";
  		}
  		function getEmployee(){
  			var empp={
  				"FBelongsDept":$("#FBelongsDept").val(),
				"FBelongsDeptId":$("#FBelongsDeptId").val(),
				"FBirthDay":$("#FBirthDay").val(),
				"FContact":$("#FContact").val(),
				
				"FContractRs":$("#FContractRs").val(),
				"FCultureDegree":$("#FCultureDegree").val(),
				"FFamilyDetailedAddress":$("#FFamilyDetailedAddress").val(),
				"FId":$("#FId").val(),
				"FIdcardNumber":$("#FIdcardNumber").val(),
				
				"FIntoCompanyTime":$("#FIntoCompanyTime").val(),
				"FTheLaborContractTime":$("#FTheLaborContractTime").val(),
				"FLaborContractExpiresTime":$("#FLaborContractExpiresTime").val(),
				"FLaborIs":$("#FLaborIs").val(),
				"FMajor":$("#FMajor").val(),
				"FMaritalStatus":$("#FMaritalStatus").val(),
				"FNational":$("#FNational").val(),
				"FNativePlace":$("#FNativePlace").val(),
				"FNowRpr":$("#FNowRpr").val(),
				"FNumbers":$("#FNumbers").val(),
				"FPolitical":$("#FPolitical").val(),
				"FProfessional":$("#FProfessional").val(),
				"FSex":$("#FSex").val(),
				"FStaffName":$("#FStaffName").val(),
				"FStaffState":$("#FStaffState").val(),
				"FEmployeeType":$("#FEmployeeType").val(),
				"FTechnical":$("#FTechnical").val(),
				"FToWorkTime":$("#FToWorkTime").val()
			};
			return empp;
  		}
  		function deletef(obj){
  			var ff=obj.parentNode.parentNode;
  			$.jBox.confirm(
  			"确认要删除["+$("#"+ff.id+" td").eq(0).text()+"]吗?",
  			"系统提示",
  			function(v, h, f){
  				if(v=="ok"){
  					$.post(
  						"/employee/11/",
  						{
  							"fFId":ff.id.substring(1),
  							"fFAndIrelationship":$("#"+ff.id+" td").eq(1).text(),
  							"fFkEmployeeId":$("#FId").val(),
  							"fFMainMembersName":$("#"+ff.id+" td").eq(0).text(),
  							"fFPhone":$("#"+ff.id+" td").eq(2).text()
  						},
  						function(data){
  							$.jBox.tip("正在删除,请稍等..", 'loading');
  							if(data){
  								if(data.success){
  									$.jBox.tip(data.message, 'success');
  										for(var rows = $("#family tr").size();rows>1;rows--){
												$("#family tr").eq(rows).remove()
											}
										familyPost($("#FId").val(),false);
  								}else{
  									$.jBox.tip(data.message, 'failure');
  								}
  							}else{
  								$.jBox.tip("网络错误!请稍后再试..", 'failure');
  							}
  						}
  					);
  				}
  			});
  		}
  		function editf(obj){
  				var ff=obj.parentNode.parentNode;
  				var rows = $("#family tr").size();
  				$("#family").append("<tr id='fedit'><td colspan='2'><input type='hidden' id='fFId' name='fFId' />"
													+"<input type='hidden' id='fFkEmployeeId' name='fFkEmployeeId' />"
													+"<input type='text' style='width:200px;' id='fFMainMembersName' name='fFMainMembersName' class='validate[required\,minSize[1]\,maxSize[20]]'/></td>"
													+"<td colspan='2'><input type='text' style='width:200px;' id='fFAndIrelationship' name='fFAndIrelationship' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
													+"<td colspan='2'><input type='text' style='width:200px;' id='fFPhone' name='fFPhone' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
													+"<td colspan='2'><input  type='button' value='保存' onClick='save(3\,\"fedit\"\,\"addfbut\");'/><input type='button' value='取消' onClick='cancel(\"fedit\"\,\"addfbut\");'/></td></tr>");
				$("#fFId").val(ff.id.substring(1)); 
				$("#fFkEmployeeId").val($("#FId").val());
				$("#fFMainMembersName").val($("#"+ff.id+" td").eq(0).text());
				$("#fFAndIrelationship").val($("#"+ff.id+" td").eq(1).text());
				$("#fFPhone").val($("#"+ff.id+" td").eq(2).text());
				for(var i=rows-1;i>1;i--){
					$("#family tr").eq(i).remove();
				}
  		}
  		function editp(obj){
  				var pp=obj.parentNode.parentNode;
  				var rows = $("#Professional tr").size();
  				$('#Professional').append("<tr id='pedit'><td><input type='hidden' id='pFId' name='pFId' /><input type='text' style='width:100px;' id='pFQualificationName' name='pFQualificationName'/><input type='hidden' id='pFkEmployeeId' name='pFkEmployeeId' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
				+"<td><input type='text' style='width:70px;' class='time' id='pFGetTime' name='pFGetTime' readonly/></td>"
				+"<td colspan='2'><input type='text' style='width:180px;' id='pFNumber' name='pFNumber' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
				+"<td><input type='text' style='width:70px;' class='time' id='pFValidity' name='pFValidity' readonly/></td>"
				+"<td><input type='text' style='width:100px;' id='pFRegisteredUnit' name='pFRegisteredUnit' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
				+"<td><input type='text' style='width:100px;' id='pFRenewalEduSituation' name='pFRenewalEduSituation' class='validate[required\,minSize[1]\,maxSize[50]]'/></td>"
				+"<td><input  type='button' value='保存' onClick='save(4\,\"pedit\"\,\"addpbut\");'/><input type='button' value='取消' onClick='cancel(\"pedit\"\,\"addpbut\");'/></td></tr>");
				$("#pFId").val(pp.id.substring(1)); 
				$("#pFkEmployeeId").val($("#FId").val());
				$("#pFQualificationName").val($("#"+pp.id+" td").eq(0).text());
				$("#pFGetTime").val($("#"+pp.id+" td").eq(1).text());
				$("#pFNumber").val($("#"+pp.id+" td").eq(2).text());
				$("#pFValidity").val($("#"+pp.id+" td").eq(3).text());
				$("#pFRegisteredUnit").val($("#"+pp.id+" td").eq(4).text());
				$("#pFRenewalEduSituation").val($("#"+pp.id+" td").eq(5).text());
				for(var i=rows-1;i>1;i--){
					$("#Professional tr").eq(i).remove();
				}
				$(".time" ).datepicker({
				showOn: "button",
				buttonImage: "../../images/calendar.gif",
				buttonImageOnly: true,
				numberOfMonths: 1,
				showButtonPanel: true,
				altFormat:'yy-mm-dd'
			});
  		}
  		function deletep(obj){
  			var pp=obj.parentNode.parentNode;
  			$.jBox.confirm(
  			"确认要删除["+$("#"+pp.id+" td").eq(0).text()+"]吗?",
  			"系统提示",
  			function(v, h, f){
  				if(v=="ok"){
  					$.post(
  						"/employee/12/",
  						{
  							"pFId":pp.id.substring(1),
							"pFQualificationName":$("#"+pp.id+" td").eq(0).text(),
							"pFkEmployeeId":$("#FId").val(),
							"pFGetTime":$("#"+pp.id+" td").eq(1).text(),
							"pFNumber":$("#"+pp.id+" td").eq(2).text(),
							"pFValidity":$("#"+pp.id+" td").eq(3).text(),
							"pFRegisteredUnit":$("#"+pp.id+" td").eq(4).text(),
							"pFRenewalEduSituation":$("#"+pp.id+" td").eq(5).text()
  						},
  						function(data){
  							$.jBox.tip("正在删除,请稍等..", 'loading');
  							if(data){
  								if(data.success){
  									$.jBox.tip(data.message, 'success');
  										for(var rows = $("#Professional tr").size();rows>1;rows--){
												$("#Professional tr").eq(rows).remove()
											}
									ProfessionalPost($("#FId").val());
  								}else{
  									$.jBox.tip(data.message, 'failure');
  								}
  							}else{
  								$.jBox.tip("网络错误!请稍后再试..", 'failure');
  							}
  						},
  						"JSON"
  					);
  				}
  			});
  				
  		}
  		function cancel(dd,id){
  			closs(dd,id);
  			if(id=="addfbut"){
  				familyPost($("#FId").val(),false);
  			}else{
  				ProfessionalPost($("#FId").val());
  			}
  		}
  		
  </script>
  </head>
  
  <body>
  <form id="formtask" action="/employee/1/" method="post">
		<div style="text-align:center">
			<table border="0" cellpadding="3" cellspacing="0"
				style="width:810px;margin:auto">
				<tr>
					<td><ul id="css3menu">
													<li class="topfirst"><a rel="#"><img
															src="../../images/menu/mainbkcm.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />
													</a>
													</li>
													<li><a rel="#" id="aB_OK"><img
															src="../../images/oa/ok.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />保存</a>
													</li>
													<li><a rel="#" id="aB_Cancel"><img
															src="../../images/oa/refresh.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />重置</a>
													</li>
													<li><a rel='workflow/process-list' id="ret"><img
															src="../../images/oa/quite.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />返回</a>
													</li>
													<li class="toplast"><a rel="#"><img
															src="../../images/menu/mainbkcm.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />
													</a>
												</ul> <br /> <br /><br/></td>
				</tr>
				<tr>
					<td>
						<div class="content" id="content"
							style="height:1000px;width:810px;display:table;text-align:left;">
							<div class="divimageclass"></div>
							<br />
							<br />
							<br />
							<br />
							<br />
							<div style="float:left;">
								<table  width="781px" border="0" cellspacing="0" cellpadding="0"  border="0" >
									<caption style="height:30px;font-size:18px; " align="center">
										<strong>在职员工登记表<br>
										</strong>
									</caption>
									<tr>
										<td  align="right" >
											<input type="hidden" id="FId" name="FId" />
											<input type="hidden" id="FEmployeeType" name="FEmployeeType" />
											编号:
											<label id="FNumbers"></label>
										</td>
									</tr>
									<tr>
											<table  class="content_table1" width="780px" cellpadding="0"  border="0" >
												<tr >
													<td class="tbl" width="80px" >姓名:</td>
													<td width="115px"><input type="text" class="validate[required,minSize[1],maxSize[20]]" style="width:115px;" id="FStaffName" name="FStaffName"></td>
													<td class="tbl" width="80px">性别:</td>
													<td width="115px">
														<select style="width:115px;" id="FSex" name="FSex">
															<option value ="男">男</option>
															 <option value ="女">女</option>
														</select>
													</td>
													<td class="tbl" width="80px">出生年月:</td>
													<td width="115px"><input type="text" class="time" style="width:90px;" id="FBirthDay" name="FBirthDay" readonly/></td>
													<td class="tbl" width="80px">民族:</td>
													<td width="115px"><input type="text" style="width:115px;" id="FNational" name="FNational"></td>
												</tr>
												<tr >
													<td class="tbl">籍贯:</td>
													<td><input type="text" style="width:115px;" id="FNativePlace" name="FNativePlace"></td>
													<td class="tbl">文化程度:</td>
													<td><input type="text" style="width:115px;" id="FCultureDegree" name="FCultureDegree"></td>
													<td class="tbl">所学专业:</td>
													<td><input type="text" style="width:115px;" id="FMajor" name="FMajor"></td>
													<td class="tbl">政治面貌:</td>
													<td>
														<select style="width:115px;" id="FPolitical" name="FPolitical">
															<option value ="群众">群众</option>
															 <option value ="团员">团员</option>
															 <option value ="党员">党员</option>
														</select>
													</td>
												</tr>
												<tr >
													<td class="tbl">参加工作时间:</td>
													<td><input style="width:90px;" class="time" id="FToWorkTime" name="FToWorkTime" type="text" readonly/></td>
													<td class="tbl">专业资格:</td>
													<td><input type="text" style="width:115px;" id="FProfessional" name="FProfessional"></td>
													<td class="tbl">技术职称:</td>
													<td><input type="text" style="width:115px;" id="FTechnical" name="FTechnical"></td>
													<td class="tbl">婚否:</td>
													<td>
														<select style="width:115px;" id="FMaritalStatus" name="FMaritalStatus">
															<option value ="未婚">未婚</option>
															 <option value ="已婚">已婚</option>
														</select>
													</td>
												</tr>
												<tr>
													<td class="tbl">进入公司时间:</td>
													<td><input style="width:90px;" class="time" id="FIntoCompanyTime" name="FIntoCompanyTime" type="text" readonly/></td>
													<td class="tbl">劳动合同签订时间:</td>
													<td><input style="width:90px;" class="time" id="FTheLaborContractTime" name="FTheLaborContractTime" type="text" readonly/></td>
													<td class="tbl">劳动合同到期时间:</td>
													<td><input style="width:90px;" class="time" id="FLaborContractExpiresTime" name="FLaborContractExpiresTime" type="text" readonly/> </td>
													<td class="tbl">员工状态:</td>
													<td>
														<select style="width:115px;" id="FStaffState" name="FStaffState">
															 <option value ="在职">在职</option>
															 <option value ="离职">离职</option>
														</select>
													</td>
												</tr>
												<tr>
													<td class="tbl">合同续签情况:</td>
													<td colspan="7"><input type="text" style="width:600px;" id="FContractRs" name="FContractRs"></td>
												</tr>
												<tr >
													<td class="tbl">劳动保险购买情况:</td>
													<td colspan="7"><input type="text" style="width:600px;" id="FLaborIs" name="FLaborIs"></td>
												</tr>
												<tr>
													<td class="tbl">家庭详细住址:</td>
													<td colspan="7"><input type="text" style="width:600px;" id="FFamilyDetailedAddress" name="FFamilyDetailedAddress"></td>
												</tr>
												<tr >
													<td colspan="2" class="tbl">身份证号码:</td>
													<td colspan="2"><input type="text" style="width:195px;" class="validate[required,minSize[1],maxSize[18]]" id="FIdcardNumber" name="FIdcardNumber" class="validate[required,minSize[1],maxSize[18]]"></td>
													<td colspan="2" class="tbl">联系方式(电话或传呼):</td>
													<td colspan="2"><input type="text" style="width:195px;" id="FContact" name="FContact"></td>
												</tr>
												<tr >
													<td colspan="2" class="tbl">所属部门:</td>
													<td colspan="2">
														<input type="hidden" id="FBelongsDeptId" name="FBelongsDeptId" />
														<div id='cb'></div>
													</td>
													<td colspan="2" class="tbl">现户口所在地:</td>
													<td colspan="2"><input type="text" style="width:195px;" id="FNowRpr" name="FNowRpr"></td>
												</tr>
											</table>
											<table id="family" class="content_table1" width="780px" cellpadding="0"  border="0" >
												<tr >
													<td colspan="8">家庭主要成员</td>
												</tr>
												<tr id='cool'>
													<td colspan="2" width="200px">姓名</td>
													<td colspan="2" width="200px">与本人关系(配偶、子女)</td>
													<td colspan="3" width="250px">联系电话</td>
													<td width="100px">  
														<input id="addfbut" type="button" value="添加" onClick="addf();" />
													</td>
												</tr>
											</table>
											<table id="Prod" class="content_table1" width="780px" cellpadding="0" border="0" >
												<tr>
													<td colspan="8" >技术职称取得情况</td>
												</tr>
												<tbody>
												<tr>
													<td width="100px">资格名称</td>
													<td width="100px">取得时间</td>
													<td colspan="2" width="200px">证号</td>
													<td width="100px">有效期</td>
													<td width="100px">注册单位</td>
													<td width="100px">续期教育情况</td>
													<td width="80px"></td>
												</tr>
												</tbody>
											</table>
											<table  id="Professional" class="content_table1" width="780px" cellpadding="0" border="0" >
												<tr>
													<td colspan="8">专业资格取得情况</td>
												</tr>
												<tr>
													<td width="100px">资格名称</td>
													<td width="110px">取得时间</td>
													<td colspan="2" width="180px">证号</td>
													<td width="110px">有效期</td>
													<td width="100px">注册单位</td>
													<td width="100px">续期教育情况</td>
													<td width="80px">
														<input id="addpbut" type="button" value="添加"onClick="addp();"/>
													</td>
												</tr>
											</table>
									</tr>
										<tr>
											<td><ul id="css3menu">
													<li class="topfirst"><a rel="#"><img
															src="../../images/menu/mainbkcm.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />
													</a>
													</li>
													<li><a rel="#" id="aB_OKd"><img
															src="../../images/oa/ok.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />保存</a>
													</li>
													<li><a rel="#" id="aB_Canceld"><img
															src="../../images/oa/refresh.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />重置</a>
													</li>
													<li><a rel='workflow/process-list' id="retd"><img
															src="../../images/oa/quite.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />返回</a>
													</li>
													<li class="toplast"><a rel="#"><img
															src="../../images/menu/mainbkcm.png"
															style="margin-right: 5px;padding-bottom: 0px; margin-bottom: 2px;" />
													</a>
												</ul> <br /> <br /></td>
										</tr>
								</table>
							</div>
						</div>
					</td>
				</tr>
			</table>
		</div>
	</form>
	<script type="text/javascript" language="javascript">
		$(document).ready(function() {
			$("#formtask").validationEngine('attach');
			$("#formtask").validationEngine({
				 ajaxFormValidation : true,
				 inlineValidation: true,
				 success :  false,
				 promptPosition: "topRight",
			 });
			
			$(".time" ).datepicker({
				showOn: "button",
				buttonImage: "../../images/calendar.gif",
				buttonImageOnly: true,
				numberOfMonths: 1,
				showButtonPanel: true,
				changeYear:true,
				 minDate:new Date(1900,1-1,1),
				altFormat:'yy-mm-dd'
			});
			var id=Request.QueryString('id');
			if(id==null){
				$("#FEmployeeType").val(1);
				$("#family").attr("style","visibility:hidden");
				$("#Professional").attr("style","visibility:hidden");
				$("#Prod").attr("style","visibility:hidden");
			}else{
				$.jBox.tip("正在加载,请稍等..", 'loading');
				$.post(
					"/employee/8/",
					{"FId":id},
					function(data){
						if(data){
							 if(data.root!=null){
							 	setEmployee(data.root[0]);
							 }
						}else{
							$.jBox.info('网络错误!请稍后再试..');
						}
						familyPost(id,true);
						$.jBox.tip("加载完成！", 'success');
				});
				"JSON"
			}

		var root=new Ext.tree.AsyncTreeNode({
			id:'0',
		      text: '组织机构',
		      expanded:true
		});
  		var tree=new Ext.tree.TreePanel({
  			id: 'orgTree',
		    height:200,
		    margins: '0 2 0 0',
		    region: 'west',
		    split: true,
		    root: root,
		    loader: new Ext.tree.TreeLoader({
		    dataUrl:'/system/SvrService/OrgService/1/'
		    }),
		    listeners:{
				click:function(node,e){
            		e.stopEvent();
            		if(node.leaf){
	            		$("#FBelongsDeptId").val(node.id);
	            		var fb=Ext.getCmp("FBelongsDept");
	            		fb.setValue(node.text);
	            		fb.collapse();
            		}
            	}
		    }
  		});
  		var comb=new Ext.form.ComboBox({
  					id:'FBelongsDept',
					fieldLabel:"父分类",
					editable:false,
					width:160,
					store:new Ext.data.SimpleStore({fields:[],data:[[]]}), 
            				mode: 'local', 
            				triggerAction:'all', 
            				maxHeight: 200, 
            				tpl: '<div ><div id="tree"></div></div>', 
            				selectedClass:'', 
            				onSelect:Ext.emptyFn,
            				emptyText:'请选择...',
            				listeners : {
            					expand:function(){
            						tree.render('tree');
            						root.reload();
            						tree.expandAll(); 
            					}
            				} 
  		});
  		
  		comb.render('cb');
  		$("#aB_OK").click(function(){
  			eSave();
  		});
  		$("#aB_Cancel").click(function(){
  			window.location.href="/html/module/employee/employeeinfo.html?id="+$("#FId").val();
  		});
  		$("#ret").click(function(){
  				window.location.href="/html/module/employee/employeemanage.html";
  			});
  			$("#aB_OKd").click(function(){
  			eSave();
  		});
  		$("#aB_Canceld").click(function(){
  			window.location.href="/html/module/employee/employeeinfo.html?id="+$("#FId").val();
  		});
  		$("#retd").click(function(){
  				window.location.href="/html/module/employee/employeemanage.html";
  			});
  		});
	</script>
  </body>
</html>
